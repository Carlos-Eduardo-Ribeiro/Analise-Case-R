---
title: "üìä An√°lise acerca da reala√ß√£o entre distor√ß√£o idade-s√©rie e o abandono escolar e sua rela√ß√£o com o afetam a taxa de aprova√ß√£o"
author: "Carlos Eduardo Ribeiro"
date: "2025-11-26"
output:
  html_document:
    theme: flatly
    highlight: tango
    toc: true
    toc_float: true
    df_print: paged
    css: "estilo.css"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## üìò Introdu√ß√£o

Este projeto tem como objetivo analisar os Indicadores Educacionais Brasileiros, buscando compreender padr√µes, avan√ßos e desigualdades presentes na educa√ß√£o do pa√≠s.
A an√°lise ir√° contemplar vari√°veis relacionadas ao acesso, perman√™ncia e desempenho dos estudantes, permitindo uma vis√£o ampla da qualidade educacional no Brasil.

<h>

## Baixando a Base de dados teste

```{r}
rm(list=ls())
```
## Tratando os dados

```{r Fun√ß√£o para tratar rendimento}

limpar_inep_rendimento <- function(arquivo) {
  
  # Ler arquivo pulando cabe√ßalhos decorativos
  df <- read_excel(arquivo, skip = 9, col_names = FALSE)
  
  # Criar nomes das colunas conforme estrutura oficial
  nomes <- c(
    "ano", "unidade_geografica", "localizacao", "dependencia_administrativa",
    
    # Aprova√ß√£o EF
    paste0("aprov_fund_", c(
      "total", "anos_iniciais", "anos_finais",
      "1ano","2ano","3ano","4ano","5ano","6ano","7ano","8ano","9ano"
    )),
    
    # Aprova√ß√£o EM
    paste0("aprov_med_", c("total","1serie","2serie","3serie","4serie","nao_seriado")),
    
    # Reprova√ß√£o EF
    paste0("reprov_fund_", c(
      "total", "anos_iniciais", "anos_finais",
      "1ano","2ano","3ano","4ano","5ano","6ano","7ano","8ano","9ano"
    )),
    
    # Reprova√ß√£o EM
    paste0("reprov_med_", c("total","1serie","2serie","3serie","4serie","nao_seriado")),
    
    # Abandono EF
    paste0("aband_fund_", c(
      "total", "anos_iniciais", "anos_finais",
      "1ano","2ano","3ano","4ano","5ano","6ano","7ano","8ano","9ano"
    )),
    
    # Abandono EM
    paste0("aband_med_", c("total","1serie","2serie","3serie","4serie","nao_seriado"))
  )
  
  # Aplicar nomes
  colnames(df) <- nomes
  
  # Tratamento de dados
  df <- df %>%
    mutate(across(where(is.character), ~ gsub(",", ".", .))) %>%  # v√≠rgula ‚Üí ponto
    mutate(across(everything(), ~ na_if(., "--"))) %>%            # "--" ‚Üí NA
    mutate(across(everything(), ~ na_if(., ""))) %>%              # "" ‚Üí NA
    mutate(across(-c(ano, unidade_geografica, localizacao, dependencia_administrativa),
                  ~ suppressWarnings(as.numeric(.))))              # converter n√∫meros
  
  return(df)
}


```



```{r Fun√ß√£o para tratar distor√ß√£o}

limpar_inep_distorcao <- function(arquivo) {
  
  df <- read_excel(arquivo, skip = 9, col_names = FALSE)
  
  nomes <- c(
    "ano", "unidade_geografica", "localizacao", "dependencia_administrativa",
    
    # TDI ‚Äì Ensino Fundamental
    paste0("tdi_fund_", c(
      "total","anos_iniciais","anos_finais",
      "1ano","2ano","3ano","4ano","5ano",
      "6ano","7ano","8ano","9ano"
    )),
    
    # TDI ‚Äì Ensino M√©dio
    paste0("tdi_med_", c("total","1serie","2serie","3serie","4serie"))
  )
  
  colnames(df) <- nomes
  
  df <- df %>%
    mutate(across(where(is.character), ~ gsub(",", ".", .))) %>%
    mutate(across(everything(), ~ na_if(., "--"))) %>%
    mutate(across(everything(), ~ na_if(., ""))) %>%
    mutate(across(-c(ano, unidade_geografica, localizacao, dependencia_administrativa),
                  ~ suppressWarnings(as.numeric(.))))
  
  return(df)
}


```


```{r Baixando dados}

library(readxl)
library(dplyr)
library(purrr)
library(janitor)

caminho <- "C:/Users/carlo/Downloads/data"

arquivos <- list(
  rendimento_2022 = file.path(caminho, "tx_rend_brasil_regioes_ufs_2022.xlsx"),
  rendimento_2023 = file.path(caminho, "tx_rend_brasil_regioes_ufs_2023.xlsx"),
  rendimento_2024 = file.path(caminho, "tx_rend_brasil_regioes_ufs_2024.xlsx"),
  
  distorcao_2022 = file.path(caminho, "TDI_BRASIL_REGIOES_UFS_2022.xlsx"),
  distorcao_2023 = file.path(caminho, "TDI_BRASIL_REGIOES_UFS_2023.xlsx"),
  distorcao_2024 = file.path(caminho, "TDI_BRASIL_REGIOES_UFS_2024.xlsx")
)

dados <- map(arquivos, ~ read_excel(.x) %>% clean_names())

names(dados) <- names(arquivos)

```

```{r Fun√ß√£o de tratamento}

dados <- map2(
  names(arquivos),
  arquivos,
  function(nm, arq) {
    if (grepl("rendimento", nm)) {
      limpar_inep_rendimento(arq)
    } else {
      limpar_inep_distorcao(arq)
    }
  }
) %>% set_names(names(arquivos))


```


```{r Unido data frames}

# Rendimento (2022‚Äì2024)
rendimento <- bind_rows(
  dados$rendimento_2022 %>% mutate(ano = 2022),
  dados$rendimento_2023 %>% mutate(ano = 2023),
  dados$rendimento_2024 %>% mutate(ano = 2024)
)

# Distor√ß√£o idade-s√©rie
distorcao <- bind_rows(
  dados$distorcao_2022 %>% mutate(ano = 2022),
  dados$distorcao_2023 %>% mutate(ano = 2023),
  dados$distorcao_2024 %>% mutate(ano = 2024)
)

```

```{r Unindo dataframes}

# --- 1. Unir os datasets j√° tratados ---
rendimento$origem <- "rendimento"
distorcao$origem <- "distorcao"

# Garantir que ano, localiza√ß√£o, unidade, depend√™ncia existam em ambos
chaves <- c("ano","unidade_geografica","localizacao","dependencia_administrativa")

# Selecionar s√≥ vari√°veis importantes
rend_key <- rendimento %>% select(any_of(chaves),
                                  starts_with("aprov"),
                                  starts_with("reprov"),
                                  starts_with("aband"))

dist_key <- distorcao %>% select(any_of(chaves),
                                  starts_with("tdi"))

# --- 2. Juntar (inner_join garante alinhamento perfeito entre bases) ---
base_final <- rend_key %>%
  inner_join(dist_key, by = chaves)

glimpse(base_final)

```

```{r vari√°veis centrais para an√°lise}

base_final <- base_final %>%
  mutate(
    # Indicadores combinados
    distorcao_total = rowMeans(select(., tdi_fund_total, tdi_med_total), na.rm = TRUE),
    abandono_total  = rowMeans(select(., aband_fund_total, aband_med_total), na.rm = TRUE),
    aprovacao_total = rowMeans(select(., aprov_fund_total, aprov_med_total), na.rm = TRUE)
  )

```


```{r}

limpar_inep_rendimento <- function(arquivo) {
  
  # Agora pulando exatamente as 8 linhas corretas
  df <- read_excel(arquivo, skip = 8, col_names = TRUE)
  
  # Limpa nomes autom√°ticos
  df <- clean_names(df)
  
  # Troca v√≠rgulas por pontos apenas onde necess√°rio
  df <- df %>%
    mutate(across(where(is.character), ~ gsub(",", ".", .)))
  
  # Converte as colunas num√©ricas (mantendo 4 primeiras como texto)
  df <- df %>% 
    mutate(across(
      -c(1:4),
      ~ suppressWarnings(as.numeric(.))
    ))
  
  return(df)
}

limpar_inep_distorcao <- function(arquivo) {
  
  df <- read_excel(arquivo, skip = 8, col_names = TRUE)
  
  df <- clean_names(df)
  
  df <- df %>%
    mutate(across(where(is.character), ~ gsub(",", ".", .)))
  
  df <- df %>%
    mutate(across(
      -c(1:4),
      ~ suppressWarnings(as.numeric(.))
    ))
  
  return(df)
}

```

## An√°lise de correla√ß√µes

```{r An√°lise 1}

library(dplyr)

correlacoes <- base_final %>% 
  select(aprovacao_total, distorcao_total, abandono_total)

as.data.frame(cor(correlacoes, use = "complete.obs"))


```


## üß™ Metodologia

A metodologia adotada na an√°lise inclui:

1. **Coleta dos Dados**

- Os dados ser√£o obtidos diretamente do portal do INEP, no conjunto de Indicadores Educacionais.

- Ap√≥s o download, os arquivos ser√£o tratados para garantir integridade e padroniza√ß√£o.</br></br>


2. **Limpeza e Prepara√ß√£o dos Dados**

- Ajuste de nomes de colunas

- Tratamento de valores ausentes

- Convers√£o de tipos (num√©rico, fator, etc.)</br></br>


3. **An√°lises Realizadas**

- Estat√≠sticas descritivas

- An√°lise explorat√≥ria (EDA)

- Visualiza√ß√£o de dados (gr√°ficos comparativos, s√©ries temporais, mapas ‚Äî quando aplic√°vel)

- Interpreta√ß√£o dos resultados </br></br>


4. **Ferramentas Utilizadas**

- Linguagem R

- Pacotes como dplyr, ggplot2, readr, tidyr, entre outros.

## üìÇ Fonte dos Dados

Todos os dados utilizados neste projeto est√£o dispon√≠veis publicamente no portal do INEP, na √°rea de dados abertos:

## üîó Indicadores Educacionais ‚Äî INEP
https://www.gov.br/inep/pt-br/acesso-a-informacao/dados-abertos/indicadores-educacionais